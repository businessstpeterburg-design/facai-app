<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FA CAI SUPREME AI</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #ffd700; --dark-gold: #b8860b; --black: #050505; }
        
        body {
            background: var(--black); color: #fff; font-family: 'Orbitron', sans-serif;
            margin: 0; padding: 0; overflow: hidden; height: 100vh;
            background: radial-gradient(circle at 50% 30%, #1a1508 0%, #050505 100%);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        /* ЗОЛОТЫЕ ЧАСТИЦЫ (Dust) */
        #particles {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 1;
        }

        .container { position: relative; z-index: 10; display: flex; flex-direction: column; align-items: center; width: 100%; }
        
        .balance-badge {
            border: 2px solid var(--gold); padding: 8px 35px; border-radius: 50px;
            background: rgba(212, 175, 55, 0.1); margin-bottom: 20px;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }

        /* КОЛЕСО */
        .wheel-box {
            width: 230px; height: 230px; margin-bottom: 30px; position: relative;
            display: flex; align-items: center; justify-content: center;
        }
        .ring {
            position: absolute; width: 100%; height: 100%; border: 3px solid var(--gold);
            border-radius: 50%; background: conic-gradient(from 0deg, #111, #332b12, #111);
            transition: transform 4s cubic-bezier(0.1, 0, 0.1, 1);
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.2);
        }
        .center-sign { font-size: 60px; color: var(--gold); text-shadow: 0 0 20px var(--gold); z-index: 5; pointer-events: none; }

        /* КНОПКА */
        .spin-btn {
            background: linear-gradient(135deg, var(--gold), var(--dark-gold));
            color: #000; border: none; padding: 18px 70px; border-radius: 15px;
            font-weight: 900; font-family: 'Orbitron'; font-size: 20px;
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.4); cursor: pointer;
        }
        .spin-btn:active { transform: scale(0.93); }

        /* СЕТКА АРТЕФАКТОВ */
        .grid { display: flex; gap: 15px; margin-top: 40px; }
        .card {
            width: 95px; height: 115px; border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 20px; background: rgba(255, 255, 255, 0.05);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            backdrop-filter: blur(10px); transition: 0.3s;
        }
        .card img { width: 75px; height: 75px; object-fit: contain; }

        /* Анимация Оракула */
        .burning { 
            border-color: var(--gold) !important; 
            box-shadow: 0 0 40px var(--gold) !important; 
            animation: pulse 0.5s infinite alternate; 
        }
        @keyframes pulse { from { transform: scale(1); } to { transform: scale(1.05); } }
    </style>
</head>
<body>

    <canvas id="particles"></canvas>
    <audio id="zenAudio" loop><source src="zen.mp3" type="audio/mpeg"></audio>

    <div class="container" id="main-ui">
        <div class="balance-badge">
            <span id="bal" style="font-size: 26px; font-weight: 900;">37.11</span> 
            <span style="font-size: 12px; color: var(--gold);">QK</span>
        </div>

        <div class="wheel-box">
            <div class="ring" id="wheel"></div>
            <div class="center-sign">財</div>
        </div>

        <button class="spin-btn" id="spinBtn">SPIN FORTUNE</button>

        <div class="grid">
            <div class="card" onclick="tg.showAlert('Твоя удача растет!')"><img src="hongbao.jpg"></div>
            <div class="card" id="oracleBtn">
                <img src="lantern.jpg">
                <div style="font-size: 7px; color: var(--gold); margin-top: 5px; font-weight: 900;">HOLD TO BURN</div>
            </div>
            <div class="card"><img src="dragon.jpg"></div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let balance = 37.11;
        let timer;
        const audio = document.getElementById('zenAudio');

        // 1. ЗОЛОТЫЕ ЧАСТИЦЫ
        const canvas = document.getElementById('particles');
        const ctx = canvas.getContext('2d');
        let pts = [];
        function initParticles() {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            for(let i=0; i<50; i++) pts.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, s: Math.random()*2, v: Math.random()*0.5});
        }
        function draw() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            ctx.fillStyle = "#ffd700";
            pts.forEach(p => {
                ctx.beginPath(); ctx.arc(p.x, p.y, p.s, 0, Math.PI*2); ctx.fill();
                p.y -= p.v; if(p.y < 0) p.y = canvas.height;
            });
            requestAnimationFrame(draw);
        }
        initParticles(); draw();

        // 2. SPIN & GONCH
        document.getElementById('spinBtn').addEventListener('click', () => {
            if (audio.paused) { audio.volume = 0.3; audio.play().catch(()=>{}); }
            if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('heavy');
            
            const wheel = document.getElementById('wheel');
            const deg = Math.floor(Math.random() * 360) + 2160;
            wheel.style.transform = `rotate(${deg}deg)`;

            setTimeout(() => {
                balance += Math.random() * 5;
                document.getElementById('bal').innerText = balance.toFixed(2);
                if (tg.HapticFeedback) tg.HapticFeedback.notificationOccurred('success');
            }, 4000);
        });

        // 3. РИТУАЛ ОРАКУЛА (Hold)
        const oBtn = document.getElementById('oracleBtn');
        function startHold(e) {
            e.preventDefault();
            oBtn.classList.add('burning');
            if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');
            timer = setTimeout(() => {
                tg.showPopup({ title: "Oracle", message: "Дракон видит твой успех!", buttons: [{type: 'ok', color: '#ffd700'}] });
                endHold();
            }, 2000);
        }
        function endHold() { clearTimeout(timer); oBtn.classList.remove('burning'); }

        oBtn.addEventListener('touchstart', startHold); oBtn.addEventListener('touchend', endHold);
        oBtn.addEventListener('mousedown', startHold); oBtn.addEventListener('mouseup', endHold);

        // 4. ПАРАЛЛАКС
        window.addEventListener('deviceorientation', (e) => {
            const x = e.beta / 15; const y = e.gamma / 15;
            document.getElementById('main-ui').style.transform = `translate(${y}px, ${x}px)`;
        });

        tg.ready();
    </script>
</body>
</html>
