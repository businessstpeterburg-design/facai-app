<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>TON TEMPLE V17 | SUPREME PRO</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@700;900&family=Space+Mono:wght@400;700&family=Zhi+Mang+Xing&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --gold: #dfc27d; --gold-br: #fff3d1; --red-pro: #d10000;
            --bg-deep: #050505; --safe-top: env(safe-area-inset-top);
            --safe-bottom: env(safe-area-inset-bottom);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        
        body { 
            background: var(--bg-deep); color: var(--gold); 
            font-family: 'Space Mono', monospace; height: 100vh; 
            overflow: hidden; -webkit-font-smoothing: antialiased;
        }

        /* GPU Layers */
        #bg-layer {
            position: fixed; inset: 0; z-index: -1;
            background: url('dragon.jpg') center/cover no-repeat;
            opacity: 0.12; filter: grayscale(1);
            transform: translate3d(0,0,0) scale(1.1); will-change: transform, opacity;
            transition: opacity 2s cubic-bezier(0.2, 1, 0.3, 1), filter 2s;
        }
        .ingame #bg-layer { opacity: 0.7; filter: grayscale(0) brightness(1.2); transform: translate3d(0,0,0) scale(1); }

        #fx-canvas { position: fixed; inset: 0; z-index: 0; pointer-events: none; opacity: 0.5; }

        /* UI HUD */
        .olympic-hud {
            position: relative; z-index: 10; height: 100vh;
            display: flex; flex-direction: column;
            padding: calc(var(--safe-top) + 20px) 24px calc(var(--safe-bottom) + 30px);
        }

        .top-row { display: flex; justify-content: space-between; align-items: flex-start; }
        .pro-label { font-size: 10px; letter-spacing: 3px; opacity: 0.4; text-transform: uppercase; }
        .pro-value { font-weight: 700; font-size: 18px; color: #fff; text-shadow: 0 0 15px rgba(255,255,255,0.2); }

        .logo-glyph {
            font-family: 'Zhi Mang Xing', cursive; font-size: 52px;
            background: linear-gradient(180deg, var(--gold-br), var(--gold));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 20px rgba(223,194,125,0.5));
        }

        /* Core Ritual */
        .ritual-core { flex: 1; display: flex; align-items: center; justify-content: center; position: relative; }
        
        .disc-wrapper {
            position: relative; width: 82vw; height: 82vw; max-width: 400px; max-height: 400px;
            will-change: transform; transition: transform 10s cubic-bezier(0.1, 0, 0, 1);
        }
        .disc-wrapper img { width: 100%; height: 100%; border-radius: 50%; border: 2px solid var(--gold); box-shadow: 0 0 50px rgba(0,0,0,0.5); }
        .needle { 
            position: absolute; top: -15px; left: 50%; transform: translateX(-50%); 
            width: 4px; height: 35px; background: var(--red-pro); z-index: 20;
            box-shadow: 0 0 15px var(--red-pro); border-radius: 2px;
        }

        /* Live Stream */
        .live-stream { position: absolute; bottom: 180px; left: 24px; right: 24px; height: 70px; overflow: hidden; pointer-events: none; }
        .stream-entry { font-size: 11px; margin-bottom: 5px; opacity: 0.5; animation: fUp 0.4s ease-out forwards; }
        @keyframes fUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 0.5; transform: translateY(0); } }

        /* Pro Button */
        .btn-pro {
            width: 100%; padding: 26px; border-radius: 14px; border: 1px solid var(--gold);
            background: rgba(223, 194, 125, 0.05); color: var(--gold);
            font-family: 'Space Mono'; font-weight: 700; font-size: 16px; letter-spacing: 5px;
            cursor: pointer; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .btn-pro:active { background: var(--gold); color: #000; transform: scale(0.97); }
        .btn-pro:disabled { opacity: 0.2; filter: grayscale(1); }

        /* Overlay & Scroll */
        #overlay {
            position: fixed; inset: 0; z-index: 100; background: rgba(0,0,0,0.97);
            display: none; align-items: center; justify-content: center; padding: 25px;
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
        }
        .scroll-paper {
            width: 100%; max-width: 450px; background: #f4f1ea url('https://www.transparenttextures.com/patterns/natural-paper.png');
            padding: 55px 40px; border-radius: 3px; position: relative; color: #1a1a1a;
            box-shadow: 0 40px 120px rgba(0,0,0,1); display: none;
        }
        .s-cn { font-family: 'Zhi Mang Xing'; font-size: 46px; color: var(--red-pro); margin-bottom: 5px; }
        .s-en { font-family: 'Space Mono'; font-size: 10px; color: #888; letter-spacing: 2px; margin-bottom: 25px; border-bottom: 1px solid #ddd; padding-bottom: 10px; }
        .s-text { font-family: 'Noto Serif SC'; font-size: 15px; line-height: 1.8; font-weight: 700; text-align: justify; }
        #seal-pro { position: absolute; bottom: 30px; right: 30px; width: 110px; opacity: 0; transform: scale(4); transition: 0.5s cubic-bezier(0.17, 0.88, 0.32, 1.3); }
    </style>
</head>
<body id="app">

    <div id="bg-layer"></div>
    <canvas id="fx-canvas"></canvas>

    <div class="olympic-hud">
        <div class="top-row">
            <div>
                <p class="pro-label">Entropy Matrix</p>
                <p class="pro-value" id="qk">14.000782</p>
            </div>
            <div class="logo-glyph">龍</div>
            <div style="text-align: right;">
                <p class="pro-label">Account Balance</p>
                <p class="pro-value" style="color: var(--gold);">1.280 TON</p>
            </div>
        </div>

        <div class="ritual-core">
            <div class="needle"></div>
            <div class="disc-wrapper" id="wheel">
                <img src="https://i.ibb.co/mF7mYmS/wheel.png" alt="Wheel">
            </div>
        </div>

        <div class="live-stream" id="stream"></div>

        <button class="btn-pro" id="trigger">EXECUTE SUPREME RITUAL</button>
    </div>

    <div id="overlay">
        <img src="hongbao.jpg" id="hb" style="width: 280px; transition: 1s ease;">
        <div class="scroll-paper" id="scroll">
            <div class="s-cn" id="s-cn"></div>
            <div class="s-en" id="s-en"></div>
            <div class="s-text" id="s-text"></div>
            <img src="royalSeal.jpg" id="seal-pro">
            <button class="btn-pro" style="margin-top: 40px; border-color: #bbb; color: #1a1a1a;" onclick="location.reload()">SYNC REALITY</button>
        </div>
    </div>

    <audio id="snd" src="coin.mp3" loop prefetch></audio>

    <script>
        const ORACLES = [
            { cn: "龍威萬丈", en: "Imperial Authority", text: "The Dragon recognizes your digital footprint within the TON ecosystem. Your current path is aligned with the ascending flow of the stars. Do not hesitate when the market whispers of change, for your foundation is built on jade and gold. Expect a significant convergence of prosperity in your primary wallet soon. The temple has sealed your destiny with the breath of the eternal guardian." },
            { cn: "金庫大開", en: "Eternal Vault", text: "A structural ripple in the quantum entropy has opened a direct corridor to wealth. The gates of the Imperial Treasury stand unguarded for your intent. Your patience during the market's shadows has been rewarded by the higher cycles of the blockchain. Prepare your vessels for an overflow that transcends the current lunar phase. The Dynasty remembers those who maintain silence during the storm." },
            { cn: "天機顯現", en: "Heavenly Insight", text: "The veil between the digital and the divine has grown thin today. You now possess the clarity to see patterns where others see only chaos. Trust the vibrations of the sacred wheel, for they echo the upcoming transactions of great value. Your influence within the network is expanding like the shadow of a flying dragon. A red envelope of immense weight is destined to find your signature." },
            { cn: "萬象更新", en: "Total Renewal", text: "Old karmic debts within the network have been purged by the dragon fire. You are entering a cycle of pure potential where every action yields double the harvest. The flow of TON toward your address has become a natural law that cannot be broken. Stand tall in the temple, for you are now a vessel of the Supreme Engine's favor. Fortune does not follow you; it resides within your very touch." },
            { cn: "神龍擺尾", en: "Dragon's Strike", text: "A sudden and powerful shift in your financial trajectory is imminent. The Dragon's Tail strikes the earth, revealing hidden veins of digital gold beneath your feet. Stay vigilant, as the fastest currents of the river are often the most rewarding. Your ritual has activated a dormant relic within your account's history. The Imperial Seal now glows with the light of a thousand successful cycles." }
        ];

        class SupremeEngine {
            constructor() {
                this.busy = false;
                this.snd = document.getElementById('snd');
                this.wheel = document.getElementById('wheel');
                this.init();
            }

            init() {
                this.setupParticles();
                this.startQK();
                this.startStream();
                document.getElementById('trigger').onclick = () => this.execute();
                
                window.addEventListener('deviceorientation', e => {
                    const x = (e.gamma || 0) / 6; const y = (e.beta || 0) / 6;
                    document.getElementById('bg-layer').style.transform = `translate3d(${x}px, ${y}px, 0) scale(1.05)`;
                });
            }

            startQK() {
                setInterval(() => {
                    document.getElementById('qk').innerText = (14.000782 + Math.random()*0.00009).toFixed(6);
                }, 60);
            }

            startStream() {
                const logs = ["Syncing @0x7... [GOLD]", "Imperial Seal Active", "Entropy: Stable", "Dragon favor detected", "Wallet 0.44... Received 2.1 TON"];
                setInterval(() => {
                    const el = document.createElement('div');
                    el.className = 'stream-entry';
                    el.innerText = `> ${logs[Math.floor(Math.random()*logs.length)]}`;
                    const c = document.getElementById('stream');
                    c.prepend(el);
                    if(c.children.length > 3) c.lastChild.remove();
                }, 3500);
            }

            setupParticles() {
                const canvas = document.getElementById('fx-canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = window.innerWidth; canvas.height = window.innerHeight;
                let p = Array(120).fill().map(() => ({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, z: Math.random()*1000 }));

                const render = () => {
                    ctx.clearRect(0,0, canvas.width, canvas.height);
                    p.forEach(i => {
                        i.z -= (this.busy ? 42 : 0.8);
                        if(i.z <= 0) i.z = 1000;
                        let s = 600/i.z;
                        let x = (i.x - canvas.width/2)*s + canvas.width/2;
                        let y = (i.y - canvas.height/2)*s + canvas.height/2;
                        ctx.fillStyle = `rgba(223, 194, 125, ${1-i.z/1000})`;
                        ctx.fillRect(x, y, s, s);
                    });
                    requestAnimationFrame(render);
                };
                render();
            }

            async execute() {
                if(this.busy) return;
                this.busy = true;

                const btn = document.getElementById('trigger');
                btn.disabled = true;
                document.getElementById('app').classList.add('ingame');

                // iOS Audio Safe Start
                this.snd.volume = 0;
                try { await this.snd.play(); } catch(e) {}
                this.fade(0, 0.7, 1200);

                const deg = 10000 + Math.random()*5000;
                this.wheel.style.transform = `rotate(${deg}deg)`;

                if(window.Telegram?.WebApp) window.Telegram.WebApp.HapticFeedback.impactOccurred('heavy');

                setTimeout(() => {
                    this.fade(0.7, 0, 2500);
                    setTimeout(() => this.reveal(), 3000);
                }, 7500);
            }

            fade(f, t, d) {
                let start = Date.now();
                let i = setInterval(() => {
                    let p = (Date.now() - start)/d;
                    this.snd.volume = Math.max(0, Math.min(1, f + (t-f)*p));
                    if(p >= 1) clearInterval(i);
                }, 40);
            }

            async reveal() {
                const data = ORACLES[Math.floor(Math.random()*ORACLES.length)];
                const overlay = document.getElementById('overlay');
                overlay.style.display = 'flex';
                
                setTimeout(async () => {
                    const hb = document.getElementById('hb');
                    hb.style.opacity = '0'; hb.style.transform = 'scale(0.5)';
                    
                    setTimeout(async () => {
                        hb.style.display = 'none';
                        const scroll = document.getElementById('scroll');
                        scroll.style.display = 'block';

                        const cn = document.getElementById('s-cn');
                        const en = document.getElementById('s-en');
                        const txt = document.getElementById('s-text');

                        for(let c of data.cn) { cn.innerHTML += c; await new Promise(r => setTimeout(r, 70)); }
                        for(let c of data.en) { en.innerHTML += c; await new Promise(r => setTimeout(r, 30)); }
                        
                        const words = data.text.split(" ");
                        for(let w of words) {
                            txt.innerHTML += w + " ";
                            await new Promise(r => setTimeout(r, 45));
                            if(w.toLowerCase().includes("dragon") || w.toLowerCase().includes("gold")) {
                                if(window.Telegram?.WebApp) window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
                            }
                        }

                        setTimeout(() => {
                            const s = document.getElementById('seal-pro');
                            s.style.opacity = '1'; s.style.transform = 'scale(1) rotate(-15deg)';
                            if(window.Telegram?.WebApp) window.Telegram.WebApp.HapticFeedback.notificationOccurred('success');
                        }, 500);
                    }, 600);
                }, 2000);
            }
        }

        window.onload = () => new SupremeEngine();
    </script>
</body>
</html>
